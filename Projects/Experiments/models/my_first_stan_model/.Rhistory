remove.packages("rstan")
if (file.exists(".RData")) file.remove(".RData")
Sys.setenv(DOWNLOAD_STATIC_LIBV8 = 1)
install.packages("rstan", repos = "https://cloud.r-project.org/", dependencies = TRUE)
example(stan_model, package = "rstan", run.dontrun = TRUE)
library("rstan") # observe startup messages
options(mc.cores = parallel::detectCores())
rstan_options(auto_write = TRUE)
getwd()
schools_dat <- list(J = 8,
y = c(28,  8, -3,  7, -1,  1, 18, 12),
sigma = c(15, 10, 16, 11,  9, 11, 10, 18))
fit <- stan(file = 'schools.stan', data = schools_dat)
fit <- stan(file = 'schools.stan', data = schools_dat)
fit <- stan(file = 'schools.stan', data = schools_dat)
schools_dat <- list(J = 8,
y = c(28,  8, -3,  7, -1,  1, 18, 12),
sigma = c(15, 10, 16, 11,  9, 11, 10, 18))
schools_dat <- list(J = 8,
y = c(28,  8, -3,  7, -1,  1, 18, 12),
sigma = c(15, 10, 16, 11,  9, 11, 10, 18))
fit <- stan(file = 'schools.stan', data = schools_dat)
fit <- stan(file = 'schools.stan', data = schools_dat)
fit <- stan(file = 'schools.stan', data = schools_dat)
print(fit)
plot(fit)
pairs(fit, pars = c("mu", "tau", "lp__"))
la <- extract(fit, permuted = TRUE) #
mu <- la$mu
a <- extract(fit, permuted = FALSE)
a2 <- as.array(fit)
m <- as.matrix(fit)
d <- as.data.frame(fit)
CLS
CLEAR
clean
cls
dir
source("C:/Users/aljaz/OneDrive/Namizje/firstmodel.R")
source("C:/Users/aljaz/OneDrive/Namizje/firstmodel.R")
ppc_dens_overlay(y, y_rep[1:200, ])
model2_GQ <- "model2_GQ.stan";
# Assuming the file is named 'seaice_data.csv' and is in your working directory
seaice_data <- read.csv("seaice.csv", header = TRUE)
setwd("C:/Users/aljaz/OneDrive/Namizje/my_first_stan_model")
# Assuming the file is named 'seaice_data.csv' and is in your working directory
seaice_data <- read.csv("seaice.csv", header = TRUE)
# Plotting extent against year
plot(seaice_data$year, seaice_data$extent,
xlab = "Year", ylab = "Extent (Million sq. km)",
main = "Sea Ice Extent Over Time", ylim = c(0, 15))  # Adjust ylim as needed
# You can add gridlines for better visualization
grid()
lm1 <- lm(extent ~ year, data = seaice_data)
summary(lm1)
abline(lm1, col = 2, lty = 2, lw = 3)
x <- I(seaice_data$year - 1978)
y <- seaice_data$extent
N <- length(seaice_data$year)
lm1 <- lm(y ~ x)
summary(lm1)
#y = a + bx + error
lm_alpha <- summary(lm1)$coeff[1] #zac. vrednost
lm_beta <- summary(lm1)$coeff[2] #koeficient
lm_sigma <- sigma(lm1) #the residual error
stan_data <- list(N = N, x = x, y = y)
stanc("model.stan")
library(rstan)
# Assuming the file is named 'seaice_data.csv' and is in your working directory
seaice_data <- read.csv("seaice.csv", header = TRUE)
# Plotting extent against year
plot(seaice_data$year, seaice_data$extent,
xlab = "Year", ylab = "Extent (Million sq. km)",
main = "Sea Ice Extent Over Time", ylim = c(0, 15))  # Adjust ylim as needed
# You can add gridlines for better visualization
grid()
lm1 <- lm(extent ~ year, data = seaice_data)
summary(lm1)
abline(lm1, col = 2, lty = 2, lw = 3)
x <- I(seaice_data$year - 1978)
y <- seaice_data$extent
N <- length(seaice_data$year)
lm1 <- lm(y ~ x)
summary(lm1)
#y = a + bx + error
lm_alpha <- summary(lm1)$coeff[1] #zac. vrednost
lm_beta <- summary(lm1)$coeff[2] #koeficient
lm_sigma <- sigma(lm1) #the residual error
stan_data <- list(N = N, x = x, y = y)
stanc("model.stan")
stan_model1 <- "model.stan"
fit <- stan(file = stan_model1, data = stan_data, warmup = 500, iter = 1000, chains = 4, cores = 2, thin = 1)
fit
posterior <- extract(fit)
str(posterior)
plot(y ~ x, pch = 20)
abline(lm1, col = 2, lty = 2, lw = 3)
abline( mean(posterior$alpha), mean(posterior$beta), col = 6, lw = 2)
for (i in 1:500) {
abline(posterior$alpha[i], posterior$beta[i], col = "gray", lty = 1)
}
plot(y ~ x, pch = 20)
for (i in 1:500) {
abline(posterior$alpha[i], posterior$beta[i], col = "gray", lty = 1)
}
abline(mean(posterior$alpha), mean(posterior$beta), col = 6, lw = 2)
stan_model2 <- "model2.stan"
fit2 <- stan(stan_model2, data = stan_data, warmup = 500, iter = 1000, chains = 4, cores = 2, thin = 1)
